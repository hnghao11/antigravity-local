"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ErrorHandler = void 0;
const views_1 = require("../constants/views");
/**
 * General error handler.
 */
class ErrorHandler {
    /**
     * Should be used only if the affected error breaks the whole extension.
     */
    static async handleGlobal(
    // eslint-disable-next-line @typescript-eslint/no-redundant-type-constituents
    error, logger, contextService, loadingBadge) {
        await contextService.setContext(views_1.SNYK_CONTEXT.ERROR, error);
        loadingBadge.setLoadingBadge(true);
        ErrorHandler.handle(error, logger);
    }
    /**
     * Should be used to log locally and report error event remotely.
     */
    // eslint-disable-next-line @typescript-eslint/no-redundant-type-constituents
    static handle(error, logger, message) {
        const errorStr = ErrorHandler.stringifyError(error);
        logger.error(message ? `${message}. ${errorStr}` : errorStr);
    }
    // eslint-disable-next-line @typescript-eslint/no-redundant-type-constituents
    static stringifyError(error) {
        return JSON.stringify(error, Object.getOwnPropertyNames(error));
    }
}
exports.ErrorHandler = ErrorHandler;
//# sourceMappingURL=errorHandler.js.map